import pandas as pd
import io
import matplotlib.pyplot as plt
import seaborn as sns

# Load the data
data = pd.read_csv('/content/sample_data/credit_risk_dataset.csv')

# Display basic statistics of the dataset
print(data.describe())

# Countplot of loan grades
plt.figure(figsize=(10, 6))
sns.countplot(x='loan_grade', data=data, order=sorted(data['loan_grade'].unique()))
plt.title('Loan Grades Count')
plt.show()

# Boxplot of loan amounts
plt.figure(figsize=(10, 6))
sns.boxplot(x='loan_amnt', data=data)
plt.title('Distribution of Loan Amounts')
plt.show()

# Scatter plot of income vs. loan amount
plt.figure(figsize=(10, 6))
sns.scatterplot(x='person_income', y='loan_amnt', data=data, hue='loan_status')
plt.title('Income vs. Loan Amount')
plt.show()

# Correlation matrix heatmap
correlation_matrix = data.corr()
plt.figure(figsize=(12, 8))
sns.heatmap(correlation_matrix, annot=True, cmap='coolwarm', linewidths=0.5)
plt.title('Correlation Matrix Heatmap')
plt.show()

# Access csv file via github repo
"""
import requests
import pandas as pd

# Replace with your GitHub username, repository name, and file path
github_username = "your_username"
repo_name = "your_repository"
file_path = "path/to/your/file.csv"

# Replace with your personal access token
github_token = "your_personal_access_token"

# Construct the raw content URL for the CSV file
raw_url = f"https://raw.githubusercontent.com/{github_username}/{repo_name}/main/{file_path}"

# Set up headers with the personal access token for authentication
headers = {"Authorization": f"token {github_token}"}

# Make a GET request to the raw URL and read the CSV into a DataFrame
response = requests.get(raw_url, headers=headers)

# Check if the request was successful (status code 200)
if response.status_code == 200:
    # Read the CSV data into a DataFrame
    df = pd.read_csv(pd.compat.StringIO(response.text))
    print(df.head())
else:
    print(f"Failed to retrieve data. Status code: {response.status_code}")
    print(response.text)
"""
